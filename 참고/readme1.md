[개요]
- 숫자 게임은 1라운드 개인전과 2라운드 팀전, 그리고 동일 네트워크에서 진행하는 실시간 대전을 지원하는 교육용 수학 게임입니다.
- 학생은 1 + * ( ) 기호만 사용해 목표 숫자를 만들고, 교사는 관리자 메뉴에서 문제·코스트·타이머 등을 즉시 조정할 수 있습니다.

[사전 준비]
1. Python 3.10 이상 설치 후 `pip install -r requirements.txt` 실행
2. 실행 파일 사용 시에는 `dist/NumberGame/NumberGame.exe` 실행
3. 네트워크 대전을 위해 두 컴퓨터를 동일한 와이파이에 연결하고, Windows 방화벽에서 python 또는 exe의 수신을 허용

[프로그램 실행]
1. `python main.py` 또는 exe 실행
2. 메인 메뉴에서 모드를 선택
3. F11로 전체화면, ESC로 해제 가능

[관리자 메뉴]
- 접근: 메인 메뉴 → 관리자 메뉴 → 비밀번호 `20250809!`
- 주요 설정
  - 1라운드 모드 I·II 문제와 코스트
  - 2라운드 팀전 문제, 총 코스트, 학생별 코스트 범위, 작전회의 시간
  - 타이머 (라운드별, 코인 분배)
  - 네트워크 대전 문제 설정 (비워두면 오프라인 설정을 그대로 사용)
- 저장을 누르면 `game_settings` 폴더의 json 파일들이 즉시 갱신됩니다.

[문제 데이터 관리]
- 기본 문제 파일
  - 1라운드 모드 I: `game_settings/mode1_problems.json`
  - 1라운드 모드 II: `game_settings/mode2_problems.json`
  - 2라운드 팀전: `game_settings/team_problems.json`
- 네트워크 전용 문제 파일
  - 1라운드 모드 I: `game_settings/network_mode1_problems.json`
  - 1라운드 모드 II: `game_settings/network_mode2_problems.json`
  - 2라운드 팀전: `game_settings/network_team_problems.json`
- 관리자 메뉴의 네트워크 섹션에서 전용 목록을 입력하면 해당 파일이 생성되며, 비워두고 저장하면 삭제되어 기본값으로 복귀합니다.

[네트워크 대전 1라운드 (개인전)]
호스트 절차
1. 메인 메뉴 → 네트워크 대전 → 방 만들기
2. 원하는 모드를 선택하고 시작
3. 화면 상단에 표시되는 참가 코드(4자리)를 게스트에게 전달
4. 상대가 접속하면 자동으로 첫 라운드가 열리고 목표 숫자가 공유됨

게스트 절차
1. 메인 메뉴 → 네트워크 대전 → 방 참가하기
2. Zeroconf 목록에서 호스트 방을 더블 클릭하거나 수동 입력 버튼으로 IP/포트를 직접 입력
3. 참가 코드를 입력하여 연결
4. 호스트가 라운드를 시작하면 문제를 공유받고 게임 진행

운영 특징
- 다회전 자동진행: 한 라운드가 끝나면 호스트가 다음 문제를 자동으로 열며 스코어가 좌측 상단에 누적됩니다.
- 문제 순서: 네트워크 모드 I과 II는 각각 `network_mode1_problems.json`, `network_mode2_problems.json` 순서를 따르고, 목록이 끝나면 10~50 사이의 무작위 목표가 계속 출제됩니다.
- 라운드 기록: 화면 하단 리스트에 라운드 번호, 목표, 승자가 순서대로 남습니다.
- 3분 카운트다운: 각 라운드는 180초 동안 진행되며, 시간 내에 **목표 숫자를 맞힌 뒤 최적 코스트(또는 가장 작은 코스트)에 가까운 수식을 제출한 팀**이 승리합니다. 두 명 모두 정답을 못 찾으면 목표와 가장 가까운 값을 만든 참가자가 승리하고, 완전히 동일하면 무승부가 선언됩니다.
- 히스토리 공유: 나와 상대방의 모든 제출 내역(수식, COIN, 오차)이 하나의 히스토리 창에 순서대로 기록됩니다.
- 관전 모드: 네트워크 대전 진입 화면에서 **관전 모드** 버튼을 누르면 플레이어 두 대 외의 PC도 동일한 참가 코드를 사용해 접속하여 스코어·타이머·히스토리를 실시간으로 확인할 수 있습니다.

[네트워크 대전 2라운드 (4:4 팀전)]
호스트
1. 메인 메뉴 → 네트워크 대전 → 방 만들기 → 팀전 선택
2. COIN 분배 화면에서 학생 별 배분 입력
3. 시작 버튼을 누르면 NetworkTeamGameView가 열리면서 상대에게 참가 코드를 공유
4. 상대가 접속하면 목표 숫자를 브로드캐스트하고 동시에 팀전 화면이 활성화
5. 먼저 정답을 만든 팀이 즉시 승리하며, 호스트가 결과 메시지를 전송

게스트
1. 메인 메뉴 → 네트워크 대전 → 방 참가하기 → 팀전 진행 중인 방 선택 또는 IP/포트 입력
2. 참가 코드 입력 후 COIN 분배 화면에서 호스트와 동일하게 배분
3. 호스트가 라운드를 시작하면 동일한 목표 숫자와 코스트가 적용된 상태로 팀전이 시작
4. 정답 제출 시 호스트에게 검증 요청을 전송하며, 판정 결과에 따라 재시도 또는 승리 메시지를 받음

운영 팁
- 네트워크 팀전에서는 학생 네 명이 한 컴퓨터를 사용하므로, 화면 우측 상단 상태 문구를 보고 현재 차례 학생을 빠르게 교체
- 정답을 맞힌 팀은 자동으로 입력창이 잠기며, 2초 후 메인 메뉴로 복귀
- 게스트가 오답 판정을 받으면 시스템이 자동으로 입력 잠금을 해제하므로 즉시 재도전 가능
- 3분 타이머 + 최적해 비교: 두 팀 모두 동시에 3분 타이머가 돌아가며, 시간 종료 후 호스트가 양 팀의 최고 기록을 비교합니다. **최적해 → COIN → 제출 시간** 순으로 우선순위를 두어 승패를 결정하고, 무승부면 양 팀 모두 결과 팝업으로 안내됩니다.
- 기록 보드: 팀전 화면 상단에 우리 팀과 상대 팀의 최고기록, 그리고 모든 제출 히스토리가 실시간으로 표시됩니다. 수업 중 실시간 피드백이 가능하므로 조별 전략 토론 자료로도 활용할 수 있습니다.
- 관전 모드에서는 팀전 역시 읽기 전용 화면으로 동일한 정보를 공유하므로, 다른 교사나 학생이 경기 흐름을 실시간으로 확인할 수 있습니다.

[수업 운영 순서 예시]
1. 관리자 메뉴에서 수업용 문제와 네트워크 전용 문제를 미리 입력
2. 1라운드는 동일 네트워크에서 개인전 대전을 진행하며 스코어를 통해 승자 선정
3. 2라운드는 팀전 모드를 선택하여 두 컴퓨터(각각 4명)를 네트워크로 연결해 결승전을 진행
4. 경기 중간에는 COIN 분배 화면의 타이머를 활용하여 작전회의 시간을 부여
5. 라운드 종료 후 기록을 화면 캡처하거나 학생에게 공유

[문제 해결 참고]
- 네트워크 연결이 되지 않을 때: 동일 서브넷인지, 방화벽이 허용되어 있는지, 참가 코드가 일치하는지 확인
- 관리자 비밀번호 분실 시: `ui/main_menu_view.py`의 `open_admin_menu` 함수에서 비밀번호 상수를 수정 가능
- 설정 파일을 초기화하고 싶으면 `game_settings` 폴더에서 관련 json을 삭제하면 기본값이 다시 생성됩니다.


